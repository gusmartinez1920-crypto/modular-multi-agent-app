# --- Estágio Base ---
# Imagem Python leve para manter o tamanho final reduzido
FROM python:3.11-slim

# --- Instalação de Dependências do Sistema ---
# Instala o Git, que pode ser necessário para algumas dependências Python
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
    git \
    build-essential \
    && \
    # Limpa o cache para reduzir o tamanho da imagem
    rm -rf /var/lib/apt/lists/*

# --- Configuração do Ambiente ---
# Define o diretório de trabalho principal da aplicação
WORKDIR /app

# --- Instalação de Dependências Python ---
# Copia o arquivo de requisitos e instala as bibliotecas
COPY requirements.txt .
# O --no-cache-dir garante que não haverá cache de pacotes, 
# ajudando a manter a imagem leve
RUN pip install --no-cache-dir -r requirements.txt

# --- Cópia do Código da Aplicação ---
# Copia todo o código da aplicação para o diretório de trabalho
COPY . .

# --- Comando de Execução ---
# O comando padrão para iniciar o container, que pode ser sobrescrito 
# no docker-compose.yml
# CMD ["python", "main.py"]
